{"version":3,"sources":["assets\\scripts\\start_scene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class start_scene extends cc.Component {\r\n\r\n    email_data: string;\r\n    password_data: string;\r\n\r\n    onload() {\r\n        cc.debug.setDisplayStats(false);\r\n    }\r\n \r\n    start () {\r\n        this.scheduleOnce( ()=> {\r\n            cc.find('background').active = false;\r\n        }, 3.5)\r\n        //cc.audioEngine.playMusic(this.bgm, true);\r\n\r\n        this.email_data = \"\";\r\n        this.password_data = \"\";\r\n\r\n        var email = new cc.Component.EventHandler();\r\n        email.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\r\n        email.component = \"start_scene\"\r\n        email.handler = \"emailUpdate\";\r\n        email.customEventData = \"foobar\";\r\n        cc.find(\"Canvas/Email\").getComponent(cc.EditBox).textChanged.push(email);\r\n\r\n        var password = new cc.Component.EventHandler();\r\n        password.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\r\n        password.component = \"start_scene\"\r\n        password.handler = \"passwordUpdate\";\r\n        password.customEventData = \"foobar\";\r\n        cc.find(\"Canvas/Password\").getComponent(cc.EditBox).textChanged.push(password);\r\n\r\n        let signin = new cc.Component.EventHandler();\r\n        signin.target = this.node;\r\n        signin.component = \"start_scene\";\r\n        signin.handler = \"loadsignin\";\r\n        cc.find(\"Canvas/SignIn\").getComponent(cc.Button).clickEvents.push(signin);\r\n\r\n        let signup = new cc.Component.EventHandler();\r\n        signup.target = this.node;\r\n        signup.component = \"start_scene\";\r\n        signup.handler = \"loadsignup\";\r\n        cc.find(\"Canvas/SignUp\").getComponent(cc.Button).clickEvents.push(signup); \r\n\r\n    }\r\n    emailUpdate(text, editbox, customEventData) {\r\n        this.email_data = text;\r\n        //console.log(this.email_data);\r\n    }\r\n    passwordUpdate(text, editbox, customEventData) {\r\n        this.password_data = text;\r\n    }\r\n    loadsignin() {\r\n        //cc.audioEngine.playEffect(this.press, false);\r\n        firebase.auth().signInWithEmailAndPassword(this.email_data, this.password_data).then( (result) => {\r\n            firebase.database().ref('/users').once(\"value\").then( (snapshot) => {\r\n                if(snapshot.child(firebase.auth().currentUser.uid).exists() == false) {\r\n                    var a = {};\r\n                    var tmp = {};\r\n                    tmp['coins'] = 0;\r\n                    tmp['email'] = firebase.auth().currentUser.email;\r\n                    tmp['highscore'] = 0;\r\n                    var t = {'lego':0, 'banana': 0, 'color': {1:false, 2: false, 3: false, 4: false, 5: false}, 'signal': 0, 'mute': 0}\r\n                    tmp['powerup'] = t;\r\n                    a[firebase.auth().currentUser.uid] = tmp;\r\n                    firebase.database().ref('/users/').update(a);\r\n                }\r\n            });\r\n            alert('Sign in success.');\r\n            cc.director.loadScene(\"menu\");\r\n        }).catch(function(error) {\r\n            alert(error);\r\n        });\r\n    }\r\n    loadsignup() {\r\n        //cc.audioEngine.playEffect(this.press, false);\r\n        //console.log(this.email_data, this.password_data);\r\n        firebase.auth().createUserWithEmailAndPassword(this.email_data, this.password_data).then( (result) => {\r\n            firebase.database().ref('/users').once(\"value\").then( (snapshot)=> {\r\n                if(snapshot.child(firebase.auth().currentUser.uid).exists() == false) {\r\n                    var a = {};\r\n                    var tmp = {};\r\n                    tmp['coins'] = 0;\r\n                    tmp['email'] = firebase.auth().currentUser.email;\r\n                    tmp['highscore'] = 0;\r\n                    var t = {'lego':0, 'banana': 0, 'color': {1:false, 2: false, 3: false, 4: false, 5: false}, 'signal': 0, 'mute': 0}\r\n                    tmp['powerup'] = t;\r\n                    a[firebase.auth().currentUser.uid] = tmp;\r\n                    firebase.database().ref('/users/').update(a);\r\n                }\r\n            });\r\n            alert('Sign up success.');\r\n            cc.director.loadScene(\"menu\");\r\n        }).catch(function(error) {\r\n            alert(error);\r\n        });\r\n    }   \r\n}\r\n\r\n\r\n"]}
