{"version":3,"sources":["assets/scripts/start_scene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class start_scene extends cc.Component {\n\n    email_data: string;\n    password_data: string;\n\n    onload() {\n        cc.debug.setDisplayStats(false);\n    }\n \n    start () {\n        this.scheduleOnce( ()=> {\n            cc.find('background').active = false;\n        }, 3.5)\n        //cc.audioEngine.playMusic(this.bgm, true);\n\n        this.email_data = \"\";\n        this.password_data = \"\";\n\n        var email = new cc.Component.EventHandler();\n        email.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n        email.component = \"start_scene\"\n        email.handler = \"emailUpdate\";\n        email.customEventData = \"foobar\";\n        cc.find(\"Canvas/Email\").getComponent(cc.EditBox).textChanged.push(email);\n\n        var password = new cc.Component.EventHandler();\n        password.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n        password.component = \"start_scene\"\n        password.handler = \"passwordUpdate\";\n        password.customEventData = \"foobar\";\n        cc.find(\"Canvas/Password\").getComponent(cc.EditBox).textChanged.push(password);\n\n        let signin = new cc.Component.EventHandler();\n        signin.target = this.node;\n        signin.component = \"start_scene\";\n        signin.handler = \"loadsignin\";\n        cc.find(\"Canvas/SignIn\").getComponent(cc.Button).clickEvents.push(signin);\n\n        let signup = new cc.Component.EventHandler();\n        signup.target = this.node;\n        signup.component = \"start_scene\";\n        signup.handler = \"loadsignup\";\n        cc.find(\"Canvas/SignUp\").getComponent(cc.Button).clickEvents.push(signup); \n\n    }\n    emailUpdate(text, editbox, customEventData) {\n        this.email_data = text;\n        //console.log(this.email_data);\n    }\n    passwordUpdate(text, editbox, customEventData) {\n        this.password_data = text;\n    }\n    loadsignin() {\n        //cc.audioEngine.playEffect(this.press, false);\n        firebase.auth().signInWithEmailAndPassword(this.email_data, this.password_data).then( (result) => {\n            firebase.database().ref('/users').once(\"value\").then( (snapshot) => {\n                if(snapshot.child(firebase.auth().currentUser.uid).exists() == false) {\n                    var a = {};\n                    var tmp = {};\n                    tmp['coins'] = 0;\n                    tmp['email'] = firebase.auth().currentUser.email;\n                    tmp['highscore'] = 0;\n                    var t = {'lego':0, 'banana': 0, 'color': {1:false, 2: false, 3: false, 4: false, 5: false}, 'signal': 0, 'mute': 0}\n                    tmp['powerup'] = t;\n                    a[firebase.auth().currentUser.uid] = tmp;\n                    firebase.database().ref('/users/').update(a);\n                }\n            });\n            alert('Sign in success.');\n            cc.director.loadScene(\"menu\");\n        }).catch(function(error) {\n            alert(error);\n        });\n    }\n    loadsignup() {\n        //cc.audioEngine.playEffect(this.press, false);\n        //console.log(this.email_data, this.password_data);\n        firebase.auth().createUserWithEmailAndPassword(this.email_data, this.password_data).then( (result) => {\n            firebase.database().ref('/users').once(\"value\").then( (snapshot)=> {\n                if(snapshot.child(firebase.auth().currentUser.uid).exists() == false) {\n                    var a = {};\n                    var tmp = {};\n                    tmp['coins'] = 0;\n                    tmp['email'] = firebase.auth().currentUser.email;\n                    tmp['highscore'] = 0;\n                    var t = {'lego':0, 'banana': 0, 'color': {1:false, 2: false, 3: false, 4: false, 5: false}, 'signal': 0, 'mute': 0}\n                    tmp['powerup'] = t;\n                    a[firebase.auth().currentUser.uid] = tmp;\n                    firebase.database().ref('/users/').update(a);\n                }\n            });\n            alert('Sign up success.');\n            cc.director.loadScene(\"menu\");\n        }).catch(function(error) {\n            alert(error);\n        });\n    }   \n}\n\n\n"]}